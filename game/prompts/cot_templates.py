# 시민 세팅

GAME_CONTEXT = """
[게임 상황 설정: 라이어 게임]
1. 당신은 지금 '라이어 게임'을 플레이하고 있습니다.
2. 참가자 중 한 명은 제시어를 모르는 '라이어'이고, 나머지는 '시민'입니다.
3. 시민의 목표: 라이어에게 정답을 들키지 않으면서, 아군에게만 신호를 보내야 합니다.
4. 라이어의 목표: 정체를 들키지 않고, 시민들의 대화에 자연스럽게 묻어가야 합니다.
"""

def get_global_brainstorming_prompt(category: str, keyword: str) -> tuple[str, str]:
    system = f"""
    {GAME_CONTEXT}
    당신은 [시민]입니다.
    라이어를 속이기 위한 첫 단계로, 제시어와 관련된 다양한 소재를 브레인스토밍해야 합니다.
    """

    user = f"""
    제시어: '{keyword}' (카테고리: {category})
    
    이 제시어와 관련된 '보편적 문화적 코드(한국)', '속설', '유명한 일화', '특징' 등을 10가지 내로 나열하세요.
    
    [주의]
    1. 제시어 단어 자체는 절대 포함하지 마세요.
    2. {{"keywords": ["충성심과 우정의 상징 - 오랜 세월 동안 인간과 함께 해온 동물로서, 충직함의 대표적인 예로 여겨짐.",
    "소셜 미디어 스타 - 유명한 SNS 계정에서 귀여운 모습으로 많은 팔로워를 얻는 사례가 많음.",
    "다양한 품종과 특징 - 크기, 색상, 성격 등 다양한 품종이 존재하여 각기 다른 매력을 지님.",
    ...]}} 형태의 JSON만 출력하세요.
    """
    return system, user


def get_citizen_description(category: str,
keyword: str,
assigned_keyword: str,
#history_text: str
) -> tuple[str, str]:

    """[시민] 할당받은 키워드로 문장 만들기"""
    system = f"""
    {GAME_CONTEXT}
    당신은 라이어 게임의 [시민]입니다. 주어진 소재를 활용해 라이어를 속여야 합니다.
    당신의 목표는 제시어를 아예 다른 걸로 속이는 게 아니라, "이 제시어"와 관련된 경험을 말해서 공감대를 형성하는 것입니다.
    """
    user = f"""
    [당신에게 할당된 소재]
    제시어: '{keyword}'
    카테고리: '{category}'
    제시어 관련 설명 참고 자료: {assigned_keyword}

    [미션]
    할당된 소재('{assigned_keyword}')를 제시어 설명에 활용하세요.
    
    [주의]
    1. 제시어 직접 언급 금지.
    2. 제시어가 충분히 유츄될 수 있는 비슷한 단어도 사용하지 마세요.(ex. 제시어: 강아지, 설명에 '안내견', '개목줄' 등 사용 금지)
    3. 할당된 소재가 무엇인지 시민들은 눈치챌 수 있게, 하지만 라이어는 헷갈리게 표현하세요.
    4. 설명에서 제시어를 지칭하는 대명사를 사용해주세요. (ex."이 동물", "이 과일", "이 장소", "이 직업")
    5. 설명은 한 문장으로 작성해주세요.

    [예시]
    - 제시어: 사과 (연상: 껍질, 아침)
      -> "이 과일은 아침에 먹으면 좋다는데, 깎아 먹기가 귀찮아서 잘 안 먹게 돼." (O - 식습관 묘사)
    - 제시어: 호랑이 (연상: 곶감, 산)
      -> "산에서 이 친구 마주치면 도망가도 소용없을 거야." (O - 대처 상황 묘사)

    [출력]
    """
    return system, user


def get_liar_step2(category: str, history_text: str) -> str:
    """[라이어 2단계: 전략 수립]"""
    
    system = f"""
    {GAME_CONTEXT}
    당신은 라이어 게임의 [라이어]입니다. 제시어는 시민들만 알고 있습니다. 당신은 제시어를 모르는 것을 절대로 들키면 안 됩니다.
    시민들의 대화 흐름에 자연스럽게 묻어가는 '거짓말'을 해야 합니다. [예시]의 말하기 방식을 하나 참고해 '한 문장'으로 답변해주세요.
    """

    user = f"""
    
    [카테고리]
    {category}

    [대화 맥락]
    {history_text}
    
    [대화 전략]
    - 반드시 [예시]를 보고 한 전략1,2의 '한 문장'을 참고해 자연스러운 발화를 해주세요. (제일 중요!)
    - 만약 첫 순서라면, [카테고리] 내에서 어디에나 쓸 수 있는 말을 선택하세요. (예: "호불호가 갈린다"나 "자주 볼 수 있어" 같은)
    - 설명에서 제시어를 지칭하는 대명사를 사용해주세요. (예: "이 동물", "이 과일", "이 장소", "이 직업")
    - 제시어를 모른다는 말을 하지 말아주세요. 당신은 라이어고 모르는게 당연합니다.
    - 한 문장으로 설명해주세요.
    
    [예시]
    전략1: 포괄적 말하기
    -> 이 동물은 정말 다양한 색깔과 패턴을 가지고 있어서, 처음 만나면 매료되기 쉬워. 
    -> 이 동물은 정말 애정이 많이 필요하다고 느낄 때가 있어.
    -> 이 동물을 키우는 사람을 주변에서 많이 봤어.
    전략2: 흐름에 묻어가기
    -> 맞아, 나도 이 동물이 OO한 특징이 있다고 생각해.
    -> 맞아, 그 동물은 oo한 경우가 있지
    """
    
    return system, user

def get_articulation_prompt(concept: str, name: str) -> tuple[str, str]:
    """[공통 3단계: 말하기]"""
    system = f"""
    {GAME_CONTEXT}
    당신은 게임 플레이어 '{name}'입니다.
    이제 생각한 내용을 실제 게임 채팅창에 칠 차례입니다.
    """

    user = f"""
    당신이 말해야 할 내용: "{concept}"
    
    위 내용을 자연스러운 제시어에 대한 설명을 하는 듯한 문장으로 말하세요.
    
    [규칙]
    1. 친구랑 대화하듯 자연스러운 반말 사용.
    3. 20자 내외로 짧게.

    출력:
    """
    return system, user